<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Todo list</title>

</head>
<body class="bg-fuchsia-700">

    <h1 class="text-7xl text-white">To-do list</h1>
    <h2 class="text-4xl text-white">In here, you can write and storage your tasks for your todo list</h2>

    <textarea class="text-xl" name="task" id="task" cols="80" rows="5" placeholder="Write your task here"></textarea>
    <button type="button" onclick="saveTask()" class="bg-blue-500 hover:bg-blue-700 rounded-md p-3 text-white">Save task</button>

    <br /><br />

    <div class="px-12">
        <ol id="tasklist" class="list-none text-white">
        </ol>
    </div>

    <script>
        let taskArray = [];

        let allListItems = document.querySelectorAll('li');

        function Task(description, status){
            this.description = description;
            this.status = status;
        }

        function saveTask() {

            let taskListElement = document.getElementById("tasklist");
            let taskTextAreaValue = document.getElementById("task").value;

            if(taskTextAreaValue != ""){

                if(taskTextAreaValue.length <= 3){

                    alert("Value must be greater than 3 characters!");

                }
                else{

                    if(taskArray.length >= 8){

                        alert("Maximum 8 items are allowed to add in the list.");

                    }
                    else{

                        taskArray.push(new Task(taskTextAreaValue, "incomplete"));
                        console.log(taskArray);
                        taskListElement.innerHTML = "";

                        for(let i = 0; i < taskArray.length; i++){

                            if(taskArray[i].status == "incomplete"){

                                taskListElement.innerHTML += `
                                <li id="${i}" class="w-auto bg-yellow-300 p-3 text-lg text-black flex">
                                    <p class="cursor-pointer flex-auto w-64" onclick="completeTask(${i})">${i+1}. ${taskArray[i].description}</p>
                                    <button onclick="deleteTask(${i})">
                                        <strong class="float-right text-xl align-center cursor-pointer alert-del flex-none">&times;</strong>
                                    </button>
                                </li>
                                <br />`;

                            }
                            else{

                                taskListElement.innerHTML += `
                                <li id="${i}" class="w-auto bg-green-500 p-3 text-lg text-black flex">
                                    <p class="cursor-pointer flex-auto w-64" onclick="completeTask(${i})">${i+1}. ${taskArray[i].description}</p>
                                    <button onclick="deleteTask(${i})">
                                        <strong class="float-right text-xl align-center cursor-pointer alert-del flex-none">&times;</strong>
                                    </button>
                                </li>
                                <br />`;

                            }

                        }

                    }

                }

            }
            else{

                console.log("Input text please");

            }

        }

        function deleteTask(id){

            //console.log(id);
            let decision = confirm("Do you want to delete the task?");
            let taskListElement = document.getElementById("tasklist");
            
            if(decision){

                taskListElement.innerHTML = "";

                taskArray.splice(id, 1);

                for(let i = 0; i < taskArray.length; i++){

                    if(taskArray[i].status == "incomplete"){

                        taskListElement.innerHTML += `
                        <li id="${i}" class="w-auto bg-yellow-300 p-3 text-lg text-black flex">
                            <p class="cursor-pointer flex-auto w-64" onclick="completeTask(${i})">${i+1}. ${taskArray[i].description}</p>
                            <button onclick="deleteTask(${i})">
                                <strong class="float-right text-xl align-center cursor-pointer alert-del flex-none">&times;</strong>
                            </button>
                        </li>
                        <br />`;

                    }
                    else{

                        taskListElement.innerHTML += `
                        <li id="${i}" class="w-auto bg-green-500 p-3 text-lg text-black flex">
                            <p class="cursor-pointer flex-auto w-64" onclick="completeTask(${i})">${i+1}. ${taskArray[i].description}</p>
                            <button onclick="deleteTask(${i})">
                                <strong class="float-right text-xl align-center cursor-pointer alert-del flex-none">&times;</strong>
                            </button>
                        </li>
                        <br />`;

                    }

                }

            }

        }

        function completeTask(id){
            let taskListElement = document.getElementById("tasklist");

            taskArray[id].status = "complete";

            taskListElement.innerHTML = "";

            for(let i = 0; i < taskArray.length; i++){

                if(taskArray[i].status == "incomplete"){

                    taskListElement.innerHTML += `
                    <li id="${i}" class="w-auto bg-yellow-300 p-3 text-lg text-black flex">
                        <p class="cursor-pointer flex-auto w-64" onclick="completeTask(${i})">${i+1}. ${taskArray[i].description}</p>
                        <button onclick="deleteTask(${i})">
                            <strong class="float-right text-xl align-center cursor-pointer alert-del flex-none">&times;</strong>
                        </button>
                    </li>
                    <br />`;

                }
                else{

                    taskListElement.innerHTML += `
                    <li id="${i}" class="w-auto bg-green-500 p-3 text-lg text-black flex">
                        <p class="cursor-pointer flex-auto w-64" onclick="completeTask(${i})">${i+1}. ${taskArray[i].description}</p>
                        <button onclick="deleteTask(${i})">
                            <strong class="float-right text-xl align-center cursor-pointer alert-del flex-none">&times;</strong>
                        </button>
                    </li>
                    <br />`;

                }

            }

        }

    </script>

</body>
</html>